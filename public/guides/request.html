<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Routing</title>
  <meta name="description" content="A typical route accepts the route pattern as the first argument and route handler as the second argument. For example:">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/site.webmanifest">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/icons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <meta name="turbo-cache-control" content="no-cache">

  <link
    rel="preload"
    href="/assets/fonts/UntitledSans-RegularItalic.2c343d99.woff2"
    as="font"
    type="font/woff2" crossorigin
  >
  <link
    rel="preload"
    href="/assets/fonts/UntitledSans-Regular.f7547efa.woff2"
    as="font"
    type="font/woff2"
    crossorigin
  >
  <link
    rel="preload"
    href="/assets/fonts/UntitledSans-Medium.4adc0df5.woff2"
    as="font"
    type="font/woff2"
    crossorigin
  >
  <link
    rel="preload"
    href="/assets/fonts/JetBrainsMono-Regular.5eea635b.woff2"
    as="font"
    type="font/woff2"
    crossorigin
  >
<link rel="stylesheet" href="/assets/app.6c0c2135.css" />
<script src="/assets/342.70de04a2.js" defer></script>
<script src="/assets/app.26949583.js" defer></script>
</head>

<body><div class="header-wrapper">
  <header class="header">
    <div class="header-container">

      <div class="primary-links"><a href="#sidenav-open" title="Open Docs Menu" aria-label="Open Docs Menu" class="hamburger for-mobile" data-turbo="false">
  <svg role="presentation" focusable="false" aria-label="Icon for open menu" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <line x1="4" y1="6" x2="20" y2="6" />
    <line x1="4" y1="12" x2="20" y2="12" />
    <line x1="4" y1="18" x2="20" y2="18" />
  </svg>
</a>

<div class="logo-wrapper">
  <a href="https://adonisjs.com" title="AdonisJS website" target="_blank" rel="noopener">
    <span class="for-mobile">
      <svg width="68" height="17" viewBox="0 0 68 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M54.6867 0C53.54 0 52.7119 0.812178 52.7119 1.94286C52.7119 3.07354 53.54 3.88571 54.6867 3.88571C55.8333 3.88571 56.6614 3.07354 56.6614 1.94286C56.6614 0.812178 55.8333 0 54.6867 0ZM18.5686 16.6895C15.511 16.6895 13.2974 14.4286 13.2974 10.8927C13.2974 7.29317 15.511 5.03232 18.5686 5.03232C19.9859 5.03232 21.037 5.51007 21.6581 6.44965V0.509602H24.8431V16.4347H21.6581V15.304C21.0529 16.2276 20.0019 16.6895 18.5686 16.6895ZM16.5461 10.8927C16.5461 8.91803 17.6131 7.6281 19.2375 7.6281C20.8778 7.6281 21.9288 8.90211 21.9288 10.8768C21.9288 12.8197 20.8778 14.0778 19.2375 14.0778C17.6131 14.0778 16.5461 12.8197 16.5461 10.8927ZM29.8436 10.8609C29.8436 8.90211 30.9105 7.64403 32.503 7.64403C34.1115 7.64403 35.1785 8.90211 35.1785 10.8609C35.1785 12.8197 34.1115 14.0778 32.503 14.0778C30.9105 14.0778 29.8436 12.8197 29.8436 10.8609ZM64.9424 13.393C64.9424 13.9822 64.4965 14.3326 63.3658 14.3326C62.0918 14.3326 61.2956 13.6637 61.2956 12.8515H58.1105C58.1902 15.0492 60.2763 16.6895 63.3021 16.6895C66.1686 16.6895 68 15.4155 68 13.1541C68 11.466 66.9171 10.2876 64.7672 9.85761L62.4581 9.39578C61.7574 9.25246 61.3433 8.90211 61.3433 8.44028C61.3433 7.7555 62.044 7.38923 62.9358 7.38923C64.2098 7.38923 64.7035 7.97845 64.7035 8.67916H67.7293C67.6497 6.6089 66.0253 5.03232 62.9995 5.03232C60.1808 5.03232 58.2698 6.44965 58.2698 8.59953C58.2698 10.5424 59.5279 11.4183 61.407 11.8164L63.7002 12.3101C64.4487 12.4693 64.9424 12.7878 64.9424 13.393ZM53.1101 5.28712H56.2951V16.4347H53.1101V5.28712ZM43.3639 5.28712V6.44965C44.1761 5.51007 45.259 5.03232 46.5967 5.03232C49.097 5.03232 50.7213 6.65667 50.7213 9.17283V16.4347H47.5363V9.84169C47.5363 8.48806 46.7719 7.67588 45.4501 7.67588C44.1283 7.67588 43.3639 8.48806 43.3639 9.84169V16.4347H40.1789V5.28712H43.3639ZM32.503 5.03232C29.111 5.03232 26.5948 7.48478 26.5948 10.8609C26.5948 14.237 29.111 16.6895 32.503 16.6895C35.911 16.6895 38.4272 14.237 38.4272 10.8609C38.4272 7.48478 35.911 5.03232 32.503 5.03232ZM5.94005 7.6281C4.31569 7.6281 3.24871 8.91803 3.24871 10.8927C3.24871 12.8197 4.31569 14.0778 5.94005 14.0778C7.58033 14.0778 8.63138 12.8197 8.63138 10.8768C8.63138 8.90211 7.58033 7.6281 5.94005 7.6281ZM0 10.8927C0 14.4286 2.21358 16.6895 5.25527 16.6895C6.70445 16.6895 7.73958 16.2276 8.36066 15.304V16.4347H11.5457V5.28712H8.36066V6.44965C7.72365 5.51007 6.6726 5.03232 5.25527 5.03232C2.21358 5.03232 0 7.29317 0 10.8927Z" fill="white"/>
      </svg>
    </span>

    <span class="for-desktop">
      <svg width="108" height="36" viewBox="0 0 108 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0 16.3331C0 29.506 3.16017 32.6662 16.3331 32.6662C29.506 32.6662 32.6662 29.506 32.6662 16.3331C32.6662 3.16017 29.506 0 16.3331 0C3.16017 0 0 3.16017 0 16.3331ZM6.58646 19.7261L11.7093 8.08338C12.5742 6.12075 14.2374 5.05627 16.3331 5.05627C18.4288 5.05627 20.092 6.12075 20.9569 8.08338L26.0797 19.7261C26.3126 20.2916 26.5122 21.0235 26.5122 21.6555C26.5122 24.5495 24.483 26.5787 21.589 26.5787C20.6032 26.5787 19.8203 26.3271 19.0278 26.0725C18.2158 25.8116 17.3937 25.5475 16.3331 25.5475C15.2847 25.5475 14.4426 25.814 13.6145 26.076C12.8136 26.3294 12.0258 26.5787 11.0772 26.5787C8.18318 26.5787 6.15402 24.5495 6.15402 21.6555C6.15402 21.0235 6.35361 20.2916 6.58646 19.7261ZM16.3331 10.1125L11.2768 21.5557C12.7737 20.8571 14.5035 20.5245 16.3331 20.5245C18.0961 20.5245 19.8924 20.8571 21.3228 21.5557L16.3331 10.1125Z" fill="white"></path>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M94.0883 8.03894C92.9542 8.03894 92.1352 8.84223 92.1352 9.96054C92.1352 11.0788 92.9542 11.8821 94.0883 11.8821C95.2223 11.8821 96.0414 11.0788 96.0414 9.96054C96.0414 8.84223 95.2223 8.03894 94.0883 8.03894ZM58.3654 24.5458C55.3413 24.5458 53.1519 22.3097 53.1519 18.8125C53.1519 15.2523 55.3413 13.0162 58.3654 13.0162C59.7673 13.0162 60.8068 13.4887 61.4211 14.418V8.54297H64.5713V24.2938H61.4211V23.1755C60.8226 24.089 59.783 24.5458 58.3654 24.5458ZM56.3651 18.8125C56.3651 16.8594 57.4204 15.5836 59.027 15.5836C60.6493 15.5836 61.6889 16.8436 61.6889 18.7967C61.6889 20.7183 60.6493 21.9627 59.027 21.9627C57.4204 21.9627 56.3651 20.7183 56.3651 18.8125ZM69.517 18.781C69.517 16.8436 70.5723 15.5993 72.1474 15.5993C73.7382 15.5993 74.7935 16.8436 74.7935 18.781C74.7935 20.7183 73.7382 21.9627 72.1474 21.9627C70.5723 21.9627 69.517 20.7183 69.517 18.781ZM104.232 21.2854C104.232 21.8681 103.791 22.2147 102.672 22.2147C101.412 22.2147 100.625 21.5531 100.625 20.7498H97.4747C97.5535 22.9235 99.6168 24.5458 102.609 24.5458C105.445 24.5458 107.256 23.2857 107.256 21.0491C107.256 19.3795 106.185 18.214 104.059 17.7887L101.775 17.3319C101.082 17.1902 100.672 16.8436 100.672 16.3869C100.672 15.7096 101.365 15.3473 102.247 15.3473C103.507 15.3473 103.996 15.9301 103.996 16.6231H106.988C106.909 14.5755 105.303 13.0162 102.31 13.0162C99.5223 13.0162 97.6322 14.418 97.6322 16.5444C97.6322 18.466 98.8765 19.3323 100.735 19.726L103.003 20.2143C103.744 20.3718 104.232 20.6868 104.232 21.2854ZM95.6791 24.2938H92.5289V13.2682H95.6791V24.2938ZM82.8895 13.2682V14.418C83.6927 13.4887 84.7638 13.0162 86.0869 13.0162C88.5597 13.0162 90.1663 14.6228 90.1663 17.1114V24.2938H87.0162V17.7729C87.0162 16.4341 86.2601 15.6308 84.9528 15.6308C83.6455 15.6308 82.8895 16.4341 82.8895 17.7729V24.2938H79.7393V13.2682H82.8895ZM72.1474 13.0162C68.7925 13.0162 66.3039 15.4418 66.3039 18.781C66.3039 22.1202 68.7925 24.5458 72.1474 24.5458C75.5181 24.5458 78.0067 22.1202 78.0067 18.781C78.0067 15.4418 75.5181 13.0162 72.1474 13.0162ZM45.8751 15.5836C44.2685 15.5836 43.2132 16.8594 43.2132 18.8125C43.2132 20.7183 44.2685 21.9627 45.8751 21.9627C47.4974 21.9627 48.5369 20.7183 48.5369 18.7967C48.5369 16.8436 47.4974 15.5836 45.8751 15.5836ZM40 18.8125C40 22.3097 42.1894 24.5458 45.1978 24.5458C46.6311 24.5458 47.6549 24.089 48.2692 23.1755V24.2938H51.4193V13.2682H48.2692V14.418C47.6391 13.4887 46.5996 13.0162 45.1978 13.0162C42.1894 13.0162 40 15.2523 40 18.8125Z" fill="white"></path>
      </svg>
    </span>
  </a>
</div>

      </div>

      <nav class="header-nav">
        <ul>


                <li class="active">
                  <a href="/guides/context">
                    Docs
                  </a>
                  <ul>
                  </ul>
                </li>

              <li
                class=""
                x-data="{ active: false }"
                :class="{ 'expand': active }"
              >
                <a href="#" @click.prevent="active = !active">
                  Reference guides
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-down" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <polyline points="6 9 12 15 18 9" />
                  </svg>
                </a>
                <ul class="dropdown">
                    <li>
                      <a href="/reference/database/connection">Database</a>
                    </li>
                    <li>
                      <a href="/reference/validator/schema/string">Validator</a>
                    </li>
                    <li>
                      <a href="/reference/views/globals/inspect">Views &amp; Templates</a>
                    </li>
                </ul>
              </li>
        </ul>
      </nav>

      <div class="search-wrapper">
        <button class="search-trigger" title="Open search popup" aria-label="Open search popup">
          <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" aria-hidden="true">
            <path d="M0 0h24v24H0z" fill="none"></path>
            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
          </svg>
          <span class="text"> Search... </span>
        </button>
      </div>
    </div>
  </header>
</div>

<div id="sidenav-open">
  <div class="sidebar" id="sidebar" data-maintain-scroll>
    <div class="sidebar-container">




                <nav>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/introduction"> Introduction </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Fundamentals </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/application"> Application </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/config"> Config </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/environment-variables"> Environment variables </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Http </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/context"> Context </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/routing"> Routing </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/controllers"> Controllers </a>
                      </li>
                      <li
                        class="active"
                      >
                        <a href="/guides/request"> Request </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/response"> Response </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/forms-and-validations"> Forms &amp; Validation </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/file-uploads"> File uploads </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/middleware"> Middleware </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/cookies"> Cookies </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/session"> Session </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/static-assets"> Static assets </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/assets-manager"> Assets manager </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/exception-handling"> Exception Handling </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Views &amp; Templates </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/views/introduction"> Introduction </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/rendering"> Rendering </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/templating-syntax"> Templating syntax </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/data-flow"> Data flow </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/conditionals"> Conditionals </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/loops"> Loops </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/partials"> Partials </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/layouts"> Layouts </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/components"> Components </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/mutations"> Mutations </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/debugging"> Debugging </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/custom-tags"> Creating custom tags </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Validator </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/introduction"> Introduction </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/custom-messages"> Custom messages </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/error-reporters"> Error reporters </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/schema-caching"> Schema caching </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/extending-validator"> Extending validator </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Security </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/security/web-security"> Web Security </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/security/encryption"> Encryption </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/security/hashing"> Hashing </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/security/signed-urls"> Signed URLs </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Digging deeper </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/authorization"> Authorization </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/ace-commandline"> Ace </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/repl"> AdonisJS Repl </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/logger"> Logger </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/mailer"> Mailer </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/redis"> Redis </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/health-check"> Health check </a>
                      </li>
                  </ol>
                </nav>

    </div>
  </div>

  <a href="#" data-turbo="false" id="sidenav-close" class="sidenav-backdrop" title="Close Docs Menu" aria-label="Close Docs Menu"></a>
</div>

<main class="doc" data-turbo="false">
  <div class="markdown">
    <h1>Request</h1><p>The instance of the <a
  href="https://github.com/adonisjs/http-server/blob/develop/src/Request/index.ts"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>request class</a>
 allows you to access data for the current HTTP request, including the <strong>request body</strong>, <strong>uploaded files</strong>, <strong>cookies</strong> and much more.</p>
<p>You can access the <code>request</code> object from the HTTP context instance passed to the route handler, middleware, and exception handler.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">Route</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">ctx</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">ctx</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">url</span><span style="color: #F07178;">())</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>With destructuring</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">Route</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> request </span><span style="color: #89DDFF;">})</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">url</span><span style="color: #F07178;">())</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="request-data"><a
  href="#request-data"
  
  
><span class="icon icon-link"></span></a>
Request data</h2>
<p>You can access the request data using one of the following methods.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">Route</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">post</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">posts</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> request </span><span style="color: #89DDFF;">})</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * Access the entire request body</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">body</span><span style="color: #F07178;">())</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * Access the parsed query string object</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">qs</span><span style="color: #F07178;">())</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * A merged copy of the request body and the query</span></div><div class="line"><span style="color: #676E95;">   * string</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">all</span><span style="color: #F07178;">())</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * Cherry pick fields from the &quot;request.all()&quot; output</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">only</span><span style="color: #F07178;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">title</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">description</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">]))</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * Omit fields from the &quot;request.all()&quot; output</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">except</span><span style="color: #F07178;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">csrf_token</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">submit</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">]))</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * Access value for a single field</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">input</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">title</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">))</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">input</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">description</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">))</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h3 id="query-string-and-params"><a
  href="#query-string-and-params"
  
  
><span class="icon icon-link"></span></a>
Query string and params</h3>
<p>The parsed query string can be accessed using the <code>request.qs()</code> method.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">qs</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<p>The <code>request.params()</code> method returns the route parameters.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">Route</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/posts/:id/:slug</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> request </span><span style="color: #89DDFF;">})</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/*</span></div><div class="line"><span style="color: #676E95;">   * URL: /posts/1/hello-world</span></div><div class="line"><span style="color: #676E95;">   * Params: { id: &#x27;1&#x27;, slug: &#x27;hello-world&#x27; }</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">params</span><span style="color: #F07178;">())</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>You can also access a single parameter using the <code>request.param</code> method.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">param</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">id</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Default value for optional params</span></div><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">param</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">id</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">1</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h3 id="request-body"><a
  href="#request-body"
  
  
><span class="icon icon-link"></span></a>
Request body</h3>
<p>The request body is parsed using the pre-configured bodyparser middleware. Open the <code>start/kernel.ts</code> file and ensure that the following middleware is registered inside the list of the global middlewares.</p>
<div class="dimer-highlight">
    <div class="codeblock-title">
      start/kernel.ts
    </div>

<pre><code><div class="line"><span style="color: #A6ACCD;">Server</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">middleware</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">register</span><span style="color: #A6ACCD;">([</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Core/BodyParserMiddleware</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div><div class="line"><span style="color: #A6ACCD;">])</span></div></code></pre>
</div>

<p>Once the bodyparser middleware has been registered, you can use one of the following methods to access the request body.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">body</span><span style="color: #A6ACCD;">()</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// A merged copy of query string and the request body</span></div><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">all</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<p>The <code>request.input</code> method allows reading value for a single field. Optionally, you can define a default value to be returned when the actual value is <code>null</code> or <code>undefined</code>.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">input</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">title</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// If title is missing</span></div><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">input</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">title</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Hello world</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>The <code>request.only</code> and <code>request.except</code> method allows selecting or ignoring specific fields.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #676E95;">// Cherry pick</span></div><div class="line"><span style="color: #C792EA;">const</span><span style="color: #A6ACCD;"> body </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">only</span><span style="color: #A6ACCD;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">title</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">description</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">])</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Omit</span></div><div class="line"><span style="color: #C792EA;">const</span><span style="color: #A6ACCD;"> body </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">except</span><span style="color: #A6ACCD;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">submit</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">csrf_token</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">])</span></div></code></pre>
</div>

<h3 id="supported-content-types"><a
  href="#supported-content-types"
  
  
><span class="icon icon-link"></span></a>
Supported content types</h3>
<p>The bodyparser is capable of parsing the following content types.</p>
<h4 id="json"><a
  href="#json"
  
  
><span class="icon icon-link"></span></a>
JSON</h4>
<p>The JSON parser processes request sending the JSON string with one of the following content types.</p>
<ul>
<li>application/json</li>
<li>application/json-patch+json</li>
<li>application/vnd.api+json</li>
<li>application/csp-report</li>
</ul>
<p>You can add more content types to the <code>json.types</code> array inside the <code>config/bodyparser.ts</code> file, and the JSON parser will also process them.</p>
<h4 id="url-encoded"><a
  href="#url-encoded"
  
  
><span class="icon icon-link"></span></a>
URL encoded</h4>
<p>Request sending a URL encoded string with <code>content-type=&#x27;application/x-www-form-urlencoded&#x27;</code> is parsed using the URL encoding parser.</p>
<h4 id="multipart"><a
  href="#multipart"
  
  
><span class="icon icon-link"></span></a>
Multipart</h4>
<p>The multipart requests with <code>content-type=&#x27;multipart/form-data&#x27;</code> are parsed using the multipart parser. Make sure to read the guide on <a
  href="/guides/file-uploads"
  
  
>file uploads</a>
 to view all available configuration options.</p>
<h4 id="raw"><a
  href="#raw"
  
  
><span class="icon icon-link"></span></a>
Raw</h4>
<p>All requests with <code>content-type=&#x27;text/*&#x27;</code> are read using the raw parser. You can further process the raw string inside a middleware or the route handler.</p>
<p>You can use the raw parser to process custom/unsupported content types. For example</p>
<h4 id="register-the-custom-content-type"><a
  href="#register-the-custom-content-type"
  
  
><span class="icon icon-link"></span></a>
Register the custom content type</h4>
<div class="dimer-highlight">
    <div class="codeblock-title">
      config/bodyparser.ts
    </div>

<pre><code><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">raw</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #89DDFF;">    </span><span style="color: #676E95;">// ...</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #FFCB6B;">types</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> [</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">text/*</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">my-custom-content-type</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">]</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h4 id="create-a-middleware-to-parse-the-content-type-further"><a
  href="#create-a-middleware-to-parse-the-content-type-further"
  
  
><span class="icon icon-link"></span></a>
Create a middleware to parse the content type further</h4>
<div class="dimer-highlight">

<pre><code><div class="line dim"><span style="color: #A6ACCD;">Route</span></div><div class="line dim"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> request </span><span style="color: #89DDFF;">})</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #F07178;">    </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">all</span><span style="color: #F07178;">())</span></div><div class="line dim"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div><div class="line highlight"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">middleware</span><span style="color: #A6ACCD;">(</span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> request </span><span style="color: #89DDFF;">},</span><span style="color: #A6ACCD;"> next</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #C792EA;">const</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">contentType</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">header</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">content-type</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line highlight"></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">if</span><span style="color: #F07178;"> (</span><span style="color: #A6ACCD;">contentType</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">===</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">my-custom-content-type</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">) </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #F07178;">      </span><span style="color: #C792EA;">const</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">body</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">raw</span><span style="color: #F07178;">()</span></div><div class="line highlight"><span style="color: #F07178;">      </span><span style="color: #C792EA;">const</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">parsed</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #82AAFF;">someCustomParser</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">body</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">      </span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">updateBody</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">parsed</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span></div><div class="line highlight"></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">await</span><span style="color: #F07178;"> </span><span style="color: #82AAFF;">next</span><span style="color: #F07178;">()</span></div><div class="line highlight"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="request-route"><a
  href="#request-route"
  
  
><span class="icon icon-link"></span></a>
Request route</h2>
<p>The <code>request</code> class holds the current matching route for the HTTP request and you can access it as follows:</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">Route</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> request </span><span style="color: #89DDFF;">})</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * The route pattern</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">route</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">pattern</span><span style="color: #F07178;">)</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * The handler that handles the route request</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">route</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">handler</span><span style="color: #F07178;">)</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * Middleware attached to the route</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">route</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">middleware</span><span style="color: #F07178;">)</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * Route name (exists if route is named)</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">route</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">name</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>You can also check if the current request URL matches a given route or not.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">if</span><span style="color: #A6ACCD;"> (request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">matchesRoute</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/posts/:id</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)) </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<p>Or pass an array to check for more than one route. The method returns true if any of the routes match the current request URL.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">if</span><span style="color: #A6ACCD;"> (request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">matchesRoute</span><span style="color: #A6ACCD;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/posts/:id</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/posts/:id/comments</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">])) </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h2 id="request-url"><a
  href="#request-url"
  
  
><span class="icon icon-link"></span></a>
Request URL</h2>
<p>You can access the request URL using the <code>request.url()</code> method. It returns the pathname without the domain name or the port.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">url</span><span style="color: #A6ACCD;">()</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Include query string</span></div><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">url</span><span style="color: #A6ACCD;">(</span><span style="color: #FF9CAC;">true</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>The <code>request.completeUrl()</code> method returns the complete URL, including the domain and the port (if any).</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">completeUrl</span><span style="color: #A6ACCD;">()</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Include query string</span></div><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">completeUrl</span><span style="color: #A6ACCD;">(</span><span style="color: #FF9CAC;">true</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="request-method"><a
  href="#request-method"
  
  
><span class="icon icon-link"></span></a>
Request method</h2>
<h3 id="method"><a
  href="#method"
  
  
><span class="icon icon-link"></span></a>
method</h3>
<p>Returns the HTTP method for the given request. The spoofed method is returned when <a
  href="/guides/forms-and-validations#form-method-spoofing"
  
  
>form method spoofing</a>
 is enabled.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">method</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<h3 id="intended"><a
  href="#intended"
  
  
><span class="icon icon-link"></span></a>
intended</h3>
<p>The <code>intended</code> method returns the actual HTTP method and not the spoofed one.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">intended</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<h2 id="request-id"><a
  href="#request-id"
  
  
><span class="icon icon-link"></span></a>
Request id</h2>
<p>Request ids <a
  href="https://blog.heroku.com/http_request_id_s_improve_visibility_across_the_application_stack"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>help you debug and trace logs</a>
 for a given HTTP request by associating a unique id to every log entry.</p>
<p>AdonisJS follows the industry standard and has first-class support for working with the <code>X-Request-Id</code> header.</p>
<h3 id="generating-request-ids"><a
  href="#generating-request-ids"
  
  
><span class="icon icon-link"></span></a>
Generating request ids</h3>
<p>Open the <code>config/app.ts</code> and set the value of <code>http.generateRequestId</code> to true.</p>
<p>Also, the request-id is only generated when the <code>X-Request-Id</code> header is not set. This allows you to generate the request ids at your proxy server level and then reference them inside your AdonisJS application.</p>
<div class="dimer-highlight">
    <div class="codeblock-title">
      config/app.ts
    </div>

<pre><code><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">http</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #FFCB6B;">generateRequestId</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #FF9CAC;">true</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="access-request-id"><a
  href="#access-request-id"
  
  
><span class="icon icon-link"></span></a>
Access request id</h3>
<p>The <code>request.id()</code> method returns the request-id by reading the <code>X-Request-Id</code> header. The flow looks as follows:</p>
<ul>
<li>Read the value of the <code>X-Request-Id</code> header. Return the value if it is present.</li>
<li>Generate and set the header manually if the <code>generateRequestId</code> flag is enabled in the config.</li>
<li>Return <code>null</code> when the header is missing, and <code>generateRequestId</code> is disabled.</li>
</ul>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">id</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<h3 id="request-id-inside-logs"><a
  href="#request-id-inside-logs"
  
  
><span class="icon icon-link"></span></a>
Request id inside logs</h3>
<p>The logger instance attached to the HTTP context automatically sets the <code>request_id</code> property on every log statement.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">Route</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> logger </span><span style="color: #89DDFF;">})</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #89DDFF;">  </span><span style="color: #676E95;">// { msg: &#x27;hello world&#x27;, request_id: &#x27;ckk9oliws0000qt3x9vr5dkx7&#x27; }</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">logger</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">info</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">hello world</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="request-headers"><a
  href="#request-headers"
  
  
><span class="icon icon-link"></span></a>
Request headers</h2>
<p>The <code>request.headers()</code> and the <code>request.header()</code> method gives you access to the request headers.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #676E95;">// all headers</span></div><div class="line"><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #A6ACCD;">(request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">headers</span><span style="color: #A6ACCD;">())</span></div></code></pre>
</div>

<p>The <code>header</code> method returns the value for a single header field. The header name is <strong>not case sensitive</strong>.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">header</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">X-CUSTOM-KEY</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">) </span><span style="color: #89DDFF;">===</span><span style="color: #A6ACCD;"> request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">header</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">x-custom-key</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// With default value</span></div><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">header</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">x-header-name</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">default value</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="request-ip-address"><a
  href="#request-ip-address"
  
  
><span class="icon icon-link"></span></a>
Request IP address</h2>
<p>The <code>request.ip()</code> method returns the most trusted IP address for the HTTP request. Make sure to read the <a
  href="#trusted-proxy"
  
  
>trusted proxy</a>
 section to understand how you can get the correct IP address when your application is behind a proxy server.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">ip</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<p>The <code>request.ips()</code> method returns an array of IP addresses starting from the most trusted to the least trusted IP address.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">ips</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<h3 id="custom-ip-reterval-method"><a
  href="#custom-ip-reterval-method"
  
  
><span class="icon icon-link"></span></a>
Custom IP reterval method</h3>
<p>If the trusted proxy settings are not enough to determine the correct IP address, you can implement your own custom <code>getIp</code> method.</p>
<p>Open the <code>config/app.ts</code> file and define the <code>getIp</code> method as follows:</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #FFCB6B;">http</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #82AAFF;">getIp</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">request</span><span style="color: #F07178;">) </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #C792EA;">const</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">nginxRealIp</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">header</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">X-Real-Ip</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">if</span><span style="color: #F07178;"> (</span><span style="color: #A6ACCD;">nginxRealIp</span><span style="color: #F07178;">) </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">nginxRealIp</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">ips</span><span style="color: #F07178;">()[</span><span style="color: #F78C6C;">0</span><span style="color: #F07178;">]</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h2 id="content-negotiation"><a
  href="#content-negotiation"
  
  
><span class="icon icon-link"></span></a>
Content negotiation</h2>
<p><a
  href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>Content negotiation</a>
 is a mechanism that is used for serving different representations of a resource from the same URL.</p>
<p>The client making the request can negotiate for the <strong>resource representation</strong>, <strong>charset</strong>, <strong>language</strong>, and <strong>encoding</strong> using different <code>Accept</code> headers, and you can handle them as follows.</p>
<h3 id="requestaccepts"><a
  href="#requestaccepts"
  
  
><span class="icon icon-link"></span></a>
request.accepts</h3>
<p>The <code>request.accepts</code> method takes an array of content types (including shorthands) and returns the most appropriate content type by inspecting the <code>Accept</code> header. You can find the list of supported content types <a
  href="https://github.com/jshttp/mime-db/blob/master/db.json"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>here</a>
.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">Route</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">posts</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> request</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> view </span><span style="color: #89DDFF;">})</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #C792EA;">const</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">posts</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> [</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">      title</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Adonis 101</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">},</span></div><div class="line"><span style="color: #F07178;">  ]</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">switch</span><span style="color: #F07178;"> (</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">accepts</span><span style="color: #F07178;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">html</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">json</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">])) </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">case</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">html</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">:</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">view</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">render</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">posts/index</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">posts</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">case</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">json</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">:</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">posts</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">default</span><span style="color: #89DDFF;">:</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">view</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">render</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">posts/index</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">posts</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h3 id="requestlanguage"><a
  href="#requestlanguage"
  
  
><span class="icon icon-link"></span></a>
request.language</h3>
<p>Negotiate for the requested language based upon the <code>Accept-language</code> header.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #C792EA;">const</span><span style="color: #A6ACCD;"> language </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">language</span><span style="color: #A6ACCD;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">fr</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">de</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">])</span></div><div class="line"></div><div class="line"><span style="color: #89DDFF;">if</span><span style="color: #A6ACCD;"> (language) </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">view</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">render</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x60;</span><span style="color: #C3E88D;">posts/</span><span style="color: #89DDFF;">${</span><span style="color: #A6ACCD;">language</span><span style="color: #89DDFF;">}</span><span style="color: #C3E88D;">/index</span><span style="color: #89DDFF;">&#x60;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span></div><div class="line"></div><div class="line"><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> view</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">render</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">posts/en/index</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h3 id="requestencoding"><a
  href="#requestencoding"
  
  
><span class="icon icon-link"></span></a>
request.encoding</h3>
<p>Find the best encoding using the <code>Accept-encoding</code> header.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">switch</span><span style="color: #A6ACCD;"> (request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">encoding</span><span style="color: #A6ACCD;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">gzip</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">br</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">])) </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">case</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">gzip</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">:</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">compressAsGzip</span><span style="color: #A6ACCD;">(someValue)</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">case</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">br</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">:</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">compressAsBr</span><span style="color: #A6ACCD;">(someValue)</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">default</span><span style="color: #89DDFF;">:</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> value</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="requestcharset"><a
  href="#requestcharset"
  
  
><span class="icon icon-link"></span></a>
request.charset</h3>
<p>Find the best charset using the <code>Accept-charset</code> header.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #C792EA;">const</span><span style="color: #A6ACCD;"> charset </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">charset</span><span style="color: #A6ACCD;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">utf-8</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">hex</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">ascii</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">])</span></div><div class="line"><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> Buffer</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">hello-world</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">toString</span><span style="color: #A6ACCD;">(charset </span><span style="color: #89DDFF;">||</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">utf-8</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="trusted-proxy"><a
  href="#trusted-proxy"
  
  
><span class="icon icon-link"></span></a>
Trusted proxy</h2>
<p>The majority of Node.js applications are deployed behind a proxy server like Nginx or Caddy. Hence, the value of <a
  href="https://nodejs.org/api/net.html#net_socket_remoteaddress"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>remoteAddress</a>
 is the IP address of the proxy server and not the client.</p>
<p>However, all the proxy servers set the <a
  href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers#proxies"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
><code>X-Forwaded</code></a>
 headers to reflect the request&#x27;s original values, and you must inform AdonisJS to trust the proxy server headers.</p>
<p>You can control which proxies to trust by modifying the <code>http.trustProxy</code> value inside the <code>config/app.ts</code>.</p>
<div class="dimer-highlight">
    <div class="codeblock-title">
      config/app.ts
    </div>

<pre><code><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">http</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #FFCB6B;">trustProxy</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">proxyAddr</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">compile</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">valueComesHere</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="boolean-values"><a
  href="#boolean-values"
  
  
><span class="icon icon-link"></span></a>
Boolean values</h3>
<p>Setting the value to <code>true</code> will trust the left-most entry in the <code>X-Forwarded-*</code> header. Whereas the <code>false</code> assumes the application directly faces the Internet and value for <code>request.connection.remoteAddress</code> is used.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">trustProxy</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">proxyAddr</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">compile</span><span style="color: #F07178;">(</span><span style="color: #FF9CAC;">true</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="ip-addresses"><a
  href="#ip-addresses"
  
  
><span class="icon icon-link"></span></a>
Ip addresses</h3>
<p>You can also define a single or an array of proxy server IP addresses to trust.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">trustProxy</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">proxyAddr</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">compile</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">127.0.0.0/8</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// or</span></div><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">trustProxy</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">proxyAddr</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">compile</span><span style="color: #F07178;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">127.0.0.0/8</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">fc00:ac:1ab5:fff::1/64</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">])</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<p>The following shorthand keywords can also be used in place of IP addresses.</p>
<ul>
<li><code>loopback</code>: Pv4 and IPv6 loopback addresses (like <code>::1</code> and <code>127.0.0.1</code>).</li>
<li><code>linklocal</code>: IPv4 and IPv6 link-local addresses (like <code>fe80::1:1:1:1</code> and <code>169.254.0.1</code>).</li>
<li><code>uniquelocal</code>: IPv4 private addresses and IPv6 unique-local addresses (like <code>fc00:ac:1ab5:fff::1</code> and <code>192.168.0.1</code>).</li>
</ul>
<h3 id="custom-function"><a
  href="#custom-function"
  
  
><span class="icon icon-link"></span></a>
Custom function</h3>
<p>You can also define a custom function that returns a boolean on a per request basis.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">trustProxy</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">proxyAddr</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">compile</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">address</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">)</span><span style="color: #F07178;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">address</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">===</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">127.0.0.1</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">||</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">address</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">===</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">123.123.123.123</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="proxy-headers-in-use"><a
  href="#proxy-headers-in-use"
  
  
><span class="icon icon-link"></span></a>
Proxy headers in use</h3>
<p>The following methods from the request class rely on a trusted proxy to return the correct value.</p>
<ul>
<li><strong>hostname</strong>: The value of <code>request.hostname()</code> is derived from the <code>X-Forwarded-Host</code> header.</li>
<li><strong>protocol</strong>: The value of <code>request.protocol()</code> is derived from the <code>X-Forwarded-Proto</code> header.</li>
<li><strong>ip/ips</strong>: The value of <code>request.ips()</code> and <code>request.ip()</code> is derived from the <code>X-Forwaded-For</code> header. However, the <code>http.getIp</code> configuration method takes precendence when defined. <a
  href="#custom-ip-reterval-method"
  
  
>Learn more</a>
</li>
</ul>
<h2 id="cors"><a
  href="#cors"
  
  
><span class="icon icon-link"></span></a>
CORS</h2>
<p>AdonisJS has in-built support for responding to the <a
  href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>CORS</a>
 <code>OPTIONS</code> requests. Just enable it inside the <code>config/cors.ts</code> file.</p>
<div class="dimer-highlight">
    <div class="codeblock-title">
      config/cors.ts
    </div>

<pre><code><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">enabled</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #FF9CAC;">true</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #89DDFF;">  </span><span style="color: #676E95;">// ...rest of the config</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<p>The config file is extensively documented. Make sure to go through all the options and read the associated comments to understand its usage.</p>
<h2 id="other-methods-and-properties"><a
  href="#other-methods-and-properties"
  
  
><span class="icon icon-link"></span></a>
Other methods and properties</h2>
<p>Following is the list of other available methods and properties on the Request class.</p>
<h3 id="updatebody"><a
  href="#updatebody"
  
  
><span class="icon icon-link"></span></a>
updateBody</h3>
<p>Allows you to update the request body with a custom payload. It would be best if you weren&#x27;t doing it unless creating a package that purposefully mutates the request body.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">updateBody</span><span style="color: #A6ACCD;">(myCustomPayload)</span></div></code></pre>
</div>

<h3 id="updaterawbody"><a
  href="#updaterawbody"
  
  
><span class="icon icon-link"></span></a>
updateRawBody</h3>
<p>The <code>updateRawBody</code> allows updating the raw request body. The raw body is always a string.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">updateRawBody</span><span style="color: #A6ACCD;">(JSON</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">stringify</span><span style="color: #A6ACCD;">(myCustomPayload))</span></div></code></pre>
</div>

<h3 id="updateqs"><a
  href="#updateqs"
  
  
><span class="icon icon-link"></span></a>
updateQs</h3>
<p>The <code>updateQs</code> allows updating the value of parsed query string.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">updateQs</span><span style="color: #A6ACCD;">(</span><span style="color: #82AAFF;">someCustomParser</span><span style="color: #A6ACCD;">(request</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">parsedUrl</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">query))</span></div></code></pre>
</div>

<h3 id="original"><a
  href="#original"
  
  
><span class="icon icon-link"></span></a>
original</h3>
<p>Returns the request&#x27;s original body parsed by the bodyparser. Calling the <code>updateBody</code> method does not change the original payload.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">original</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<h3 id="hasbody"><a
  href="#hasbody"
  
  
><span class="icon icon-link"></span></a>
hasBody</h3>
<p>Find if the request has a body. The bodyparser uses this method to know if the request has a body before parsing it.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">if</span><span style="color: #A6ACCD;"> (request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">hasBody</span><span style="color: #A6ACCD;">()) </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #89DDFF;">  </span><span style="color: #676E95;">// parse request body</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h2 id="extending-request-class"><a
  href="#extending-request-class"
  
  
><span class="icon icon-link"></span></a>
Extending Request class</h2>
<p>You can extend the Request class using <strong>macros</strong> or <strong>getters</strong>. The best place to extend the request is inside a custom service provider.</p>
<p>Open the pre-existing <code>providers/AppProvider.ts</code> file and write the following code inside the <code>boot</code> method.</p>
<div class="dimer-highlight">

<pre><code><div class="line dim"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">ApplicationContract</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Core/Application</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line dim"></div><div class="line dim"><span style="color: #89DDFF;">export</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">default</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">class</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">AppProvider</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">static</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">needsApplication</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #FF9CAC;">true</span></div><div class="line dim"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">constructor</span><span style="color: #89DDFF;">(</span><span style="color: #C792EA;">protected</span><span style="color: #A6ACCD;"> app</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">ApplicationContract</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{}</span></div><div class="line dim"></div><div class="line highlight"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">boot</span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #C792EA;">const</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">Request</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">this.</span><span style="color: #A6ACCD;">app</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">container</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">use</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Adonis/Core/Request</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line highlight"></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #A6ACCD;">Request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">macro</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">wantsJSON</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #C792EA;">function</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">()</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #F07178;">      </span><span style="color: #C792EA;">const</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">types</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">this.</span><span style="color: #82AAFF;">types</span><span style="color: #F07178;">()</span></div><div class="line highlight"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> (</span></div><div class="line highlight"><span style="color: #F07178;">        </span><span style="color: #A6ACCD;">types</span><span style="color: #F07178;">[</span><span style="color: #F78C6C;">0</span><span style="color: #F07178;">] </span><span style="color: #89DDFF;">&amp;&amp;</span><span style="color: #F07178;"> (</span><span style="color: #A6ACCD;">types</span><span style="color: #F07178;">[</span><span style="color: #F78C6C;">0</span><span style="color: #F07178;">]</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">includes</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/json</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">) </span><span style="color: #89DDFF;">||</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">types</span><span style="color: #F07178;">[</span><span style="color: #F78C6C;">0</span><span style="color: #F07178;">]</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">includes</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">+json</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">))</span></div><div class="line highlight"><span style="color: #F07178;">      )</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line dim"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<p>In the above example, we have added the <code>wantsJSON</code> method to the request class. It reads the <code>Accept</code> header&#x27;s value and returns true if the first value negotiates for JSON.</p>
<p>You can use the newly added method as follows.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">Route</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">/</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> request </span><span style="color: #89DDFF;">})</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">if</span><span style="color: #F07178;"> (</span><span style="color: #A6ACCD;">request</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">wantsJSON</span><span style="color: #F07178;">()) </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{}</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h3 id="informing-typescript-about-the-method"><a
  href="#informing-typescript-about-the-method"
  
  
><span class="icon icon-link"></span></a>
Informing typescript about the method</h3>
<p>The <code>wantsJSON</code> property is added at the runtime, and hence Typescript does not know about it. To inform the Typescript, we will use <a
  href="https://www.typescriptlang.org/docs/handbook/declaration-merging.html#merging-interfaces"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>declaration merging</a>
 and add the property to the <code>RequestContract</code> interface.</p>
<p>Create a new file at path <code>contracts/request.ts</code> (the filename is not important) and paste the following contents inside it.</p>
<div class="dimer-highlight">
    <div class="codeblock-title">
      contracts/request.ts
    </div>

<pre><code><div class="line"><span style="color: #C792EA;">declare</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">module</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Core/Request</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #C792EA;">interface</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">RequestContract</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    wantsJSON</span><span style="color: #89DDFF;">():</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">boolean</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h2 id="additional-reading"><a
  href="#additional-reading"
  
  
><span class="icon icon-link"></span></a>
Additional reading</h2>
<p>Following are some of the additional guides to learn more about the topics not covered in this document.</p>
<ul>
<li><a
  href="/guides/cookies"
  
  
>Cookies</a>
</li>
<li><a
  href="/guides/file-uploads"
  
  
>File uploads</a>
</li>
<li><a
  href="/guides/forms-and-validations"
  
  
>Forms and validations</a>
</li>
</ul>  </div>
</main>

<aside class="toc">
    <div class="toc-container" data-turbo="false">
      <h3> On this page </h3>
      <nav>
        <ul>
<li>
<p><a
  href="#request-data"
  
  
>Request data</a>
</p>
<ul>
<li><a
  href="#query-string-and-params"
  
  
>Query string and params</a>
</li>
<li><a
  href="#request-body"
  
  
>Request body</a>
</li>
<li><a
  href="#supported-content-types"
  
  
>Supported content types</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#request-route"
  
  
>Request route</a>
</p>
</li>
<li>
<p><a
  href="#request-url"
  
  
>Request URL</a>
</p>
</li>
<li>
<p><a
  href="#request-method"
  
  
>Request method</a>
</p>
<ul>
<li><a
  href="#method"
  
  
>method</a>
</li>
<li><a
  href="#intended"
  
  
>intended</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#request-id"
  
  
>Request id</a>
</p>
<ul>
<li><a
  href="#generating-request-ids"
  
  
>Generating request ids</a>
</li>
<li><a
  href="#access-request-id"
  
  
>Access request id</a>
</li>
<li><a
  href="#request-id-inside-logs"
  
  
>Request id inside logs</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#request-headers"
  
  
>Request headers</a>
</p>
</li>
<li>
<p><a
  href="#request-ip-address"
  
  
>Request IP address</a>
</p>
<ul>
<li><a
  href="#custom-ip-reterval-method"
  
  
>Custom IP reterval method</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#content-negotiation"
  
  
>Content negotiation</a>
</p>
<ul>
<li><a
  href="#requestaccepts"
  
  
>request.accepts</a>
</li>
<li><a
  href="#requestlanguage"
  
  
>request.language</a>
</li>
<li><a
  href="#requestencoding"
  
  
>request.encoding</a>
</li>
<li><a
  href="#requestcharset"
  
  
>request.charset</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#trusted-proxy"
  
  
>Trusted proxy</a>
</p>
<ul>
<li><a
  href="#boolean-values"
  
  
>Boolean values</a>
</li>
<li><a
  href="#ip-addresses"
  
  
>Ip addresses</a>
</li>
<li><a
  href="#custom-function"
  
  
>Custom function</a>
</li>
<li><a
  href="#proxy-headers-in-use"
  
  
>Proxy headers in use</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#cors"
  
  
>CORS</a>
</p>
</li>
<li>
<p><a
  href="#other-methods-and-properties"
  
  
>Other methods and properties</a>
</p>
<ul>
<li><a
  href="#updatebody"
  
  
>updateBody</a>
</li>
<li><a
  href="#updaterawbody"
  
  
>updateRawBody</a>
</li>
<li><a
  href="#updateqs"
  
  
>updateQs</a>
</li>
<li><a
  href="#original"
  
  
>original</a>
</li>
<li><a
  href="#hasbody"
  
  
>hasBody</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#extending-request-class"
  
  
>Extending Request class</a>
</p>
<ul>
<li><a
  href="#informing-typescript-about-the-method"
  
  
>Informing typescript about the method</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#additional-reading"
  
  
>Additional reading</a>
</p>
</li>
        </ul>
      </nav>
    </div>
</aside>

</body>
</html>